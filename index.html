<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Project Central — Cloud Mode (GitHub Data)</title>
<style>
:root{--bg:#0b0f1c;--panel:#ffffff10;--ink:#eef1ff;--pri:#7aa2ff;--danger:#ff6d8c}
*{box-sizing:border-box}body{margin:0;background:linear-gradient(180deg,#0b0f1c,#0d142c);color:var(--ink);font:15px/1.6 system-ui}
.layout{display:grid;grid-template-columns:280px 1fr;min-height:100vh}
aside{padding:18px;background:var(--panel);backdrop-filter: blur(10px);border-right:1px solid #ffffff22}
main{padding:26px}
.nav a{display:block;padding:10px 12px;margin:6px 0;border-radius:10px;color:inherit;text-decoration:none}
.nav a[aria-current="page"]{background:#ffffff18;border:1px solid #ffffff33}
.btn{display:inline-flex;gap:8px;align-items:center;padding:9px 12px;border-radius:10px;background:#101632;border:1px solid #ffffff22;color:var(--ink);cursor:pointer}
.btn.primary{background:linear-gradient(135deg,#7aa2ff,#52d6ca);color:#081022;border:none}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:12px}
.card{position:relative;background:var(--panel);border:1px solid #ffffff22;border-radius:14px;padding:14px}
label{display:block;margin:10px 0 6px}
input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #ffffff33;background:#0a1026;color:var(--ink)}
.alert{margin-top:12px;padding:10px;border-radius:10px;border:1px solid #2b9;background:#173b3a}
.alert.err{border-color:#b24;background:#381b26}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.tag{font-size:12px;padding:2px 8px;border-radius:999px;background:#ffffff18;border:1px solid #ffffff33}
.preview iframe,.preview-iframe{width:100%;height:60vh;background:white;border-radius:10px;border:1px solid #ffffff22}
.menu-wrap{position:absolute; right:10px; top:10px}
.menu-btn{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;border:1px solid #ffffff33;background:#0a1026;cursor:pointer}
.menu{position:absolute; right:0; margin-top:6px; min-width:200px; background:#0b1028; border:1px solid #2b3b77; border-radius:12px; padding:6px; box-shadow:0 10px 30px rgba(0,0,0,.35); display:none; z-index:10}
.menu[aria-hidden="false"]{display:block}
.menu button{width:100%; text-align:left; padding:8px 10px; border:none; background:transparent; color:var(--ink); border-radius:8px; cursor:pointer}
.menu button:hover{background:#ffffff12}
.menu .danger{color:var(--danger)}
.kbd{font: 11px/1.2 ui-monosace, SFMono-Regular, Menlo, Consolas, monospace; padding:3px 6px; border-radius:6px; background:#0008; border:1px solid #fff2}
@media (max-width:980px){.layout{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="layout">
  <aside>
    <h2 style="margin:0 0 8px">Project Central</h2>
    <nav class="nav">
      <a href="#/dashboard" aria-current="page">Dashboard</a>
      <a href="#/new">New Project</a>
      <a href="#/settings">Settings</a>
      <a href="#/profile">Profile</a>
    </nav>
  </aside>
  <main id="main" tabindex="-1">
    <!-- DASHBOARD -->
    <section data-route="dashboard" class="route">
      <header class="row" style="justify-content:space-between">
        <h2 style="margin:0">Proyectos</h2>
        <div class="row"><a class="btn primary" href="#/new">+ Nuevo proyecto</a></div>
      </header>
      <div id="projects-empty" class="alert" hidden>Aún no hay proyectos.</div>
      <ul id="projects-list" class="cards" role="list" aria-live="polite"></ul>
    </section>

    <!-- NEW -->
    <section data-route="new" class="route" hidden>
      <h2>Nuevo proyecto</h2>
      <form id="new-form" novalidate>
        <label for="prompt">Prompt del sitio</label>
        <textarea id="prompt" rows="6" required placeholder="Brief de la landing (secciones, estilo, etc.)"></textarea>
        <label for="name">Nombre del proyecto</label>
        <input id="name" required placeholder="creative-studio">
        <label for="desc">Descripción</label><input id="desc" placeholder="Landing para estudio...">
        <div class="row" style="margin-top:10px">
          <button class="btn primary" type="submit">Generar</button>
          <button class="btn" type="button" id="preview-btn">Previsualizar</button>
        </div>
        <div id="form-errors" class="alert err" hidden></div>
        <div id="form-info" class="alert" hidden></div>
      </form>
      <div id="local-preview" class="preview" hidden>
        <h3>Preview</h3>
        <iframe id="preview" title="Previsualización"></iframe>
      </div>
    </section>

    <!-- PREVIEW -->
    <section data-route="preview" class="route" hidden>
      <header class="row" style="justify-content:space-between">
        <h2 id="pv-title" style="margin:0">Preview</h2>
        <div class="row">
          <a class="btn" href="#/dashboard">Volver</a>
          <button class="btn" id="pv-download">Descargar ZIP</button>
        </div>
      </header>
      <div class="preview">
        <iframe id="pv-iframe" class="preview-iframe" title="Vista previa del sitio"></iframe>
      </div>
      <div style="margin-top:12px">
        <label for="pv-prompt">Modificar con prompt</label>
        <textarea id="pv-prompt" rows="5" placeholder="Ej.: Oscurece el tema y añade sección de precios con 3 planes"></textarea>
        <div class="row" style="margin-top:8px">
          <button class="btn primary" id="pv-apply-ai">Aplicar cambios (IA)</button>
          <button class="btn" id="pv-apply-local">Aplicar cambios (local)</button>
        </div>
        <div id="pv-info" class="alert" hidden></div>
        <div id="pv-error" class="alert err" hidden></div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section data-route="settings" class="route" hidden>
      <h2>Settings</h2>
      <p>Modo local-first con opción de <strong>Cloud mode (GitHub data repo)</strong>.</p>

      <h3>Cloud</h3>
      <label><input type="checkbox" id="cloud-mode"> Cloud mode (GitHub)</label>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="sync-cloud">Sync desde nube → local</button>
        <button class="btn" id="migrate-cloud">Migrar locales → nube</button>
      </div>

      <h3 style="margin-top:16px">Acento</h3>
      <select id="color-accent">
        <option value="#7aa2ff">Azul</option><option value="#52d6ca">Turquesa</option>
        <option value="#ff7ab6">Magenta</option><option value="#ffd166">Ámbar</option>
      </select>

      <h3>APIs (local dev)</h3>
      <div id="secrets-local">
        <label>OpenAI API Key</label><input id="openai-key" type="password" placeholder="sk-...">
        <label>OpenAI Assistant ID</label><input id="openai-asst" placeholder="asst_...">
      </div>
      <div id="secrets-prod" class="alert" hidden>En producción se usan variables de entorno.</div>

      <div class="row" style="margin-top:12px">
        <button class="btn" id="toggle-visibility" type="button">Mostrar</button>
        <button class="btn primary" id="save-settings" type="button">Guardar</button>
      </div>

      <div class="row" style="margin-top:8px">
        <button class="btn" id="export-all" type="button">Exportar settings + proyectos</button>
        <input type="file" id="import-file" accept="application/json" style="display:none">
        <button class="btn" id="import-all" type="button">Importar (merge/sobrescribir)</button>
        <button class="btn" id="clear-all" type="button">Borrar TODO</button>
      </div>
      <div id="settings-info" class="alert" hidden></div>
      <div id="settings-errors" class="alert err" hidden></div>
    </section>

    <!-- PROFILE -->
    <section data-route="profile" class="route" hidden>
      <h2>Perfil</h2>
      <div class="cards" id="conn-cards"></div>
    </section>
  </main>
</div>

<!-- Sustituye TU <script> actual por este bloque COMPLETO. No toco tu HTML. -->
<script>
/*****************************
 * Project Central – Frontend
 * Fixes:
 *  - Normaliza projects-list (strings → {id,slug,name})
 *  - Abre preview desde nube: si faltan files, los descarga con projects-get y los guarda localmente
 *  - Ruteo #/preview?id=... robusto (id o slug)
 *****************************/

/* ===== Tiny utils & routing ===== */
const STATE_KEY = 'pcentral-state';
const $  = (s, r=document) => r.querySelector(s);
const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
const routes = ['dashboard','new','preview','settings','profile'];
const IS_LOCAL = /^(localhost|127\.0\.0\.1)/.test(location.hostname);

window.addEventListener('hashchange', renderRoute);
window.addEventListener('DOMContentLoaded', () => {
  if (!localState()) setLocalState({ version:1, savedAt:Date.now(), settings:{}, projects:[] });
  renderRoute();
  loadSettingsIntoUI();
  renderProjects();
  wireNewForm();
  renderConnections();
  bindGlobalMenuClose();
  const st = getSettings();
  if (st.cloudMode) { syncFromCloud().then(renderProjects).catch(()=>{}); }
});

/* ===== Local state helpers ===== */
function localState(){ try { return JSON.parse(localStorage.getItem(STATE_KEY)||''); } catch { return null; } }
function setLocalState(next){ localStorage.setItem(STATE_KEY, JSON.stringify({version:1, savedAt:Date.now(), settings: next.settings||{}, projects: next.projects||[]})); }
function getSettings(){ const st=localState(); return (st && st.settings) || {}; }
function setSettings(s){ const st=localState()||{settings:{},projects:[]}; st.settings=s||{}; setLocalState(st); }
function loadProjectsLocal(){ const st=localState(); return (st && st.projects) || []; }
function saveProjectsLocal(arr){ const st=localState()||{settings:{},projects:[]}; st.projects=Array.isArray(arr)?arr:[]; setLocalState(st); }

/* id / slug helpers */
function uuid(){ return 'p-'+Math.random().toString(36).slice(2,8)+'-'+Date.now().toString(36); }
function slugify(s){ return (s||'').toLowerCase().replace(/[^a-z0-9-]+/g,'-').replace(/^-+|-+$/g,'').slice(0,60)||'site'; }
function getProjectKey(p){ return p?.id || p?.slug; }
function findProjectByIdOrSlug(id){ return loadProjectsLocal().find(p=>p.id===id || p.slug===id); }

/* ===== Router ===== */
function routeEls(){ return $$('.route'); }
function renderRoute(){
  const hash = (location.hash||'').replace('#/','') || 'dashboard';
  const [route, query] = hash.split('?');
  routeEls().forEach(sec => sec.hidden = true);
  const found = routes.includes(route) ? route : 'dashboard';
  $(`[data-route="${found}"]`).hidden = false;
  $$('.nav a').forEach(a => a.setAttribute('aria-current', a.getAttribute('href')===`#/${found}` ? 'page' : 'false'));
  if (found==='preview') renderPreview(new URLSearchParams(query||''));
  if (found==='new')     resetNewFormUI();
  $('#main')?.focus();
}

/* ===== GitHub Cloud API client (Netlify Functions) ===== */
async function apiListProjects(){
  const r = await fetch('/.netlify/functions/projects-list');
  const data = await r.json().catch(()=>({}));
  if(!r.ok) throw new Error(data.error || 'github_list_error');
  // Normaliza: puede venir como array de objetos {name} o de strings [slug]
  const arr = Array.isArray(data.projects) ? data.projects : [];
  return arr.map(x => {
    if (typeof x === 'string') return { id:x, slug:x, name:x };
    const id = x.id || x.slug || slugify(x.name||'');
    const name = x.name || x.slug || id;
    return { ...x, id, slug: (x.slug||id), name };
  });
}
async function apiGetProject(id){
  const r = await fetch('/.netlify/functions/projects-get?id='+encodeURIComponent(id));
  const data = await r.json().catch(()=>({}));
  if(!r.ok) throw Object.assign(new Error(data.error||'github_get_error'), {data});
  return data; // { project, files }
}
async function apiSaveProject(project, files){
  const r = await fetch('/.netlify/functions/projects-save', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ project, files })});
  const data = await r.json().catch(()=>({}));
  if(!r.ok) throw Object.assign(new Error(data.error||'github_save_error'), {data});
  return data;
}
async function apiDeleteProject(id){
  const r = await fetch('/.netlify/functions/projects-delete', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ id })});
  const data = await r.json().catch(()=>({}));
  if(!r.ok) throw Object.assign(new Error(data.error||'github_delete_error'), {data});
  return data;
}

async function syncFromCloud(){
  const remote = await apiListProjects();
  const st = localState()||{settings:{},projects:[]};
  const map = new Map();
  (st.projects||[]).forEach(p=>{ const k=getProjectKey(p); if(k) map.set(k,{...p, id:k}); });
  (remote||[]).forEach(p=>{ const k=getProjectKey(p); if(k) map.set(k,{...p, id:k}); });
  st.projects = Array.from(map.values());
  setLocalState(st);
}

/* ===== Projects list (dashboard) ===== */
function renderProjects(){
  const list = loadProjectsLocal();
  const ul = $('#projects-list'); if(!ul) return;
  ul.innerHTML = '';
  $('#projects-empty').hidden = list.length>0;

  for (const p of list){
    const key = getProjectKey(p); if(!key) continue;
    const li = document.createElement('li');
    li.className = 'card';
    li.dataset.id = key;
    li.innerHTML = `
      <div class="menu-wrap">
        <button class="menu-btn" aria-haspopup="true" aria-expanded="false" aria-controls="menu-${key}" data-menu-btn data-id="${key}" title="Más acciones">⋮</button>
        <div class="menu" id="menu-${key}" role="menu" aria-hidden="true">
          <button role="menuitem" data-act="view" data-id="${key}">Ver</button>
          <button role="menuitem" data-act="zip" data-id="${key}">Descargar ZIP</button>
          <button role="menuitem" data-act="push" data-id="${key}">Push a GitHub</button>
          <button role="menuitem" data-act="deploy-real" data-id="${key}">Deploy en Netlify</button>
          <hr style="border:none;height:1px;background:#2b3b77;margin:6px 4px">
          <button role="menuitem" class="danger" data-act="delete" data-id="${key}">Eliminar</button>
        </div>
      </div>
      <h3 style="padding-right:36px">${p.name||p.slug||key}</h3>
      <p>${p.desc||''}</p>
      <div class="row" style="margin-bottom:8px"><span class="tag">${p.status||'local'}</span>${p.repo?`<span class="tag">${p.repo}</span>`:''}</div>
      <div class="row">
        <button class="btn primary" data-act="view" data-id="${key}">Ver</button>
        <button class="btn" data-act="zip" data-id="${key}">Descargar ZIP</button>
        <button class="btn danger" data-act="delete" data-id="${key}">Eliminar</button>
      </div>`;
    ul.appendChild(li);
  }

  // Delegación de eventos
  ul.onclick = async (ev) => {
    const btn = ev.target.closest('[data-act]'); if(!btn) return;
    const id = btn.getAttribute('data-id');
    const act = btn.getAttribute('data-act');
    if (act==='view') { openPreview(id); return; }
    if (act==='zip')  { downloadZip(id); return; }
    if (act==='delete') { if(confirm('¿Eliminar proyecto?')){ await deleteProject(id); renderProjects(); } return; }
    if (act==='push') { alert('El push a GitHub se gestiona en función server (opcional).'); return; }
    if (act==='deploy-real') { alert('El deploy real se gestiona en función server (opcional).'); return; }
  };

  // Menús accesibles mínimos
  $$('.menu-btn', ul).forEach(btn => btn.addEventListener('click', e => {
    const id = btn.getAttribute('data-id');
    const m = $('#menu-'+id);
    const open = m.getAttribute('aria-hidden')==='true';
    m.setAttribute('aria-hidden', open?'false':'true');
    btn.setAttribute('aria-expanded', open?'true':'false');
  }));
}

/* ===== New Project (form) ===== */
function wireNewForm(){
  const form = $('#new-form'); if(!form) return;
  const info = $('#form-info'); const errors = $('#form-errors');

  form.onsubmit = async (e) => {
    e.preventDefault();
    const name = (form.querySelector('[name="name"]').value||'').trim();
    const prompt = (form.querySelector('[name="prompt"]').value||'').trim();
    if (!name) { errors.hidden=false; errors.textContent='Falta el nombre'; return; }

    const slug = slugify(name);
    const id   = uuid();

    let files;
    try {
      const r = await fetch('/.netlify/functions/generate', {
        method:'POST', headers: buildOpenAIHeaders(), body: JSON.stringify({ prompt, name })
      });
      const data = await r.json(); if(!r.ok) throw new Error(data.error||'Error de generación');
      files = data.files;
    } catch (_) {
      files = generateSite({ name, prompt }).files; // fallback local
    }

    const proj = { id, name, slug, desc:'', status:'generated', files, createdAt:Date.now(), updatedAt:Date.now() };
    await upsertProject(proj);
    form.reset(); info.hidden=true; errors.hidden=true; $('#local-preview').hidden=true;
    location.hash = `#/preview?id=${encodeURIComponent(id)}`;
  };
}
function resetNewFormUI(){ const form=$('#new-form'); if(!form) return; form.reset(); $('#form-info').hidden=true; $('#form-errors').hidden=true; $('#local-preview').hidden=true; }

/* ===== Upsert/Delete (incluye Cloud) ===== */
async function upsertProject(p){
  const key = getProjectKey(p) || (p.slug ? (p.id=p.slug) : null);
  const cur = loadProjectsLocal();
  const i   = cur.findIndex(x => getProjectKey(x)===key);
  if (i>=0) cur[i] = { ...cur[i], ...p }; else cur.unshift({ ...p, id:key });
  saveProjectsLocal(cur);

  const st = getSettings();
  if (st.cloudMode) {
    const meta = { ...p }; delete meta.files; if(!meta.id) meta.id=key; if(!meta.slug) meta.slug=key;
    try { await apiSaveProject(meta, p.files||{}); } catch(err) { alert('Error guardando en nube: '+(err.message||'')); }
  }
  renderProjects();
}
async function deleteProject(id){
  const cur = loadProjectsLocal().filter(p => getProjectKey(p)!==id);
  saveProjectsLocal(cur);
  const st=getSettings(); if(st.cloudMode){ try{ await apiDeleteProject(id); }catch(e){ alert('Error borrando en nube: '+(e.message||'')); } }
}

/* ===== Preview ===== */
function openPreview(projOrId){ const id = typeof projOrId==='string' ? projOrId : getProjectKey(projOrId); if(!id) return; location.hash = `#/preview?id=${encodeURIComponent(id)}`; }
async function renderPreview(params){
  const id  = params.get('id');
  let proj  = id ? findProjectByIdOrSlug(id) : null;
  if (!proj) { location.hash = '#/dashboard'; return; }

  const st = getSettings();
  if (st.cloudMode && (!proj.files || !proj.files['index.html'])) {
    try {
      const data = await apiGetProject(id);
      if (data && data.files) {
        proj = { ...proj, ...data.project, files: data.files };
        // Guarda localmente (no vuelve a subir a la nube porque meta/files ya existen)
        const cur = loadProjectsLocal(); const i = cur.findIndex(x => getProjectKey(x)===id);
        if (i>=0) cur[i] = proj; else cur.unshift(proj); saveProjectsLocal(cur);
      }
    } catch (_) { /* silencioso */ }
  }

  $('#pv-title').textContent = `Preview — ${proj.name||proj.slug||id}`;
  const html = (proj.files && proj.files['index.html']) ? proj.files['index.html'] : '<h1>Sin index.html</h1>';
  const iframe = $('#pv-iframe');
  iframe.src = URL.createObjectURL(new Blob([html], { type:'text/html' }));
}

/* ===== ZIP (simple) ===== */
async function downloadZip(id){
  const proj = findProjectByIdOrSlug(id); if(!proj || !proj.files) { alert('Proyecto sin archivos'); return; }
  // Mini-zip: genera un blob HTML único (para simplificar)
  const blob = new Blob([proj.files['index.html']||''], { type:'text/html' });
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `${proj.slug||proj.id||'site'}.html`; a.click();
}

/* ===== Export / Import ===== */
$('#export-all')?.addEventListener('click', () => {
  const blob = new Blob([JSON.stringify(localState()||{}, null, 2)], { type:'application/json' });
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'project-central-export.json'; a.click();
});
$('#import-all')?.addEventListener('click', () => $('#import-file').click());
$('#import-file')?.addEventListener('change', async (e) => {
  const f=e.target.files[0]; if(!f) return; const txt = await f.text().catch(()=>null); if(!txt) return;
  let data=null; try{ data=JSON.parse(txt);}catch{}
  if(!data) return alert('JSON inválido');
  const cur = localState()||{settings:{},projects:[]};
  const next = { settings: data.settings||cur.settings||{}, projects: Array.isArray(data.projects)?data.projects:cur.projects };
  setLocalState(next); renderProjects(); alert('Importado');
});
$('#clear-all')?.addEventListener('click', () => { if(confirm('¿Borrar TODO?')){ localStorage.removeItem(STATE_KEY); location.reload(); } });

/* ===== Settings (sólo campos básicos conocidos) ===== */
function loadSettingsIntoUI(){
  const st = getSettings();
  $('#github-owner')?.value = st.ghOwner || '';
  $('#github-repo')?.value  = st.ghRepo  || '';
  $('#cloud-mode')?.toggleAttribute?.('aria-pressed', !!st.cloudMode);
}
$('#save-settings')?.addEventListener('click', () => {
  const cur = getSettings();
  const next = {
    ...cur,
    ghOwner: $('#github-owner')?.value || cur.ghOwner,
    ghRepo:  $('#github-repo')?.value  || cur.ghRepo,
    cloudMode: true // dejamos activado si ya lo usas
  };
  setSettings(next); alert('Settings guardados');
});
$('#toggle-visibility')?.addEventListener('click', () => {
  const pre = $('#settings-panel'); if(!pre) return; pre.hidden = !pre.hidden;
});

/* ===== Conexiones (tarjetas) ===== */
function renderConnections(){
  const wrap = $('#conn-cards'); if(!wrap) return; wrap.innerHTML='';
  const st = getSettings();
  const cards = [
    { title:'GitHub (DATA repo)', ok: !!st.cloudMode, hint: st.cloudMode? 'Conectado' : 'Desactivado' },
    { title:'OpenAI', ok: !!st.openaiProject, hint: st.openaiProject? 'Config OK' : 'Opcional' },
  ];
  for(const c of cards){
    const el = document.createElement('div'); el.className='card';
    el.innerHTML = `<h3>${c.title}</h3><p>${c.hint}</p>`;
    wrap.appendChild(el);
  }
}

/* ===== Global menu close ===== */
function bindGlobalMenuClose(){ document.addEventListener('click', (e)=>{ if(!e.target.closest('.menu-wrap')) $$('.menu[aria-hidden="false"]').forEach(m=>m.setAttribute('aria-hidden','true')); }); }

/* ===== OpenAI headers + local fallback generator (simple) ===== */
function buildOpenAIHeaders(){ return { 'Content-Type':'application/json' }; }
function generateSite({name}){
  const safeTitle = (name||'Landing');
  const html = `<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>${safeTitle}</title><style>body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:2rem;background:#0b1222;color:#e7ecff}a,button{cursor:pointer}header,footer{display:flex;justify-content:space-between;align-items:center;gap:.75rem}main{max-width:1080px;margin:0 auto}section{padding:2rem 0}.cta{background:#4f7cff;border:none;border-radius:10px;padding:.75rem 1rem;color:#fff}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}footer{opacity:.7;margin-top:2rem}</style></head><body><main><header><h1>${safeTitle}</h1><nav><a href="#features">Características</a></nav></header><section id="hero"><h2>Tu web lista en segundos</h2><p>Proyecto generado automáticamente.</p><button class="cta" onclick="alert('¡Hola!')">Empezar</button></section><section id="features"><h3>Características</h3><div class="grid"><div>Rápido</div><div>Accesible</div><div>Responsive</div></div></section><footer>© ${new Date().getFullYear()} ${safeTitle}</footer></main></body></html>`;
  return { files: { 'index.html': html } };
}
</script>

</body>
</html>
